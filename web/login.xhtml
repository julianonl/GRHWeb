<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="Layout.xhtml">

    <ui:define name="conteudo">

        <form action="j_spring_security_check" method="post" >
            <h:panelGrid columns="2" cellpadding="3" style="font-weight: bold;">
                <h:outputLabel for="j_username" value="* Usuário: " />
                <p:inputMask mask="99.999.999/9999-99" id="j_username" size="15"/>
                <h:outputLabel for="j_password" value="* Senha: " />
                <p:keyboard id="j_password" label="Senha" showMode="button" password="true" required="true" 
                            closeLabel="Fechar" backspaceLabel="Voltar" size="15" clearLabel="Limpar" title="Informe a senha para acessar o sistema"/> 
            </h:panelGrid>
            <h:commandButton value="Entrar" />
        </form>



        <h:form id="formulario">


            <p:dialog header="Recuperar Senha" widgetVar="recSenha" showEffect="explode" hideEffect="fade" height="100">
                <p:fieldset toggleable="true" >
                    <p:panelGrid columns="2">
                        <p:outputLabel value="Usuário: " />
                        <p:inputMask mask="99.999.999/9999-99" value="#{controleEmpresa.entidadeCnpj.cnpj}"/>
                    </p:panelGrid>
                    <p:commandButton actionListener="#{controleEmpresa.recuperarSenha()}" value="Recuperar Senha" update="@form"/>

                </p:fieldset>

            </p:dialog>

            <p:commandLink value="Esqueci minha senha" onclick="PF('recSenha').show()"/>












        </h:form>


        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
            <img src="recursos/images/img/loader.gif" alt="220px" width="250px"/>
        </p:dialog>


    </ui:define>

</ui:composition>

